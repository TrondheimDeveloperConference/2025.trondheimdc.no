<main class="content">
    <section class="main-section main-page">
        <div class="main-page-container">
            <div class="image-container"><img src="assets/images/tdc-large-logo.png"
                alt="Stor logo av Trondheim DC" /></div>
                <div class="text-container">
                    OCTOBER 20
                <br />
                2025
                <br />
                Clarion Hotel Trondheim
            </div>
            
            <a href="https://sessionize.com/tdc2025" class="button btn-lg btn-primary btn" target="_blank">Call for presentations has opened!</a>
        </div>
    </section>

    {% assign cfp_pages = site.posts | where: "name", "cfp_page" %}
    {% for post in cfp_pages %}
        <section class="section cfp-section {{ post.language }}">
            {{ post.content }}
        </section>
    {% endfor %}

    {% assign short_about_pages = site.posts | where: "name", "short_about_page" %}
    {% for post in short_about_pages %}
        <section class="section short-about-page {{ post.language }}">
            <img class="image-left" src="assets/images/man-with-curls.png" alt="man with curls holding a talk" />
            {{ post.content }}
        </section>
    {% endfor %}

    <script>
        function getClientLanguage(){
            // for devs... checking query params first
            const urlParams = new URLSearchParams(window.location.search);
            const lang = urlParams.get('lang');
            if (lang) {
                return lang;
            }

            const language= navigator.language || navigator.userLanguage; 
            if (!language || language.length < 2) {
                return 'en';
            }

            return language.substr(0, 2);
        }

        function hideElements(languageToHide){
            const elements = document.getElementsByClassName(languageToHide);
            console.log(elements);
            for (let i = 0; i < elements.length; i++) {
                elements[i].style.display = 'none';
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            switch(getClientLanguage()){
                case 'no':
                    hideElements('en');
                    break;
                case 'en':
                default:
                    hideElements('no');
                    break;
            }
        });
    </script>
</main>