{%- assign __lang = page.lang | default: page.language | default: site.lang | default: 'no' -%}
{%- assign __bag = site.data.i18n[__lang] -%}
{%- if __bag == nil -%}
  {%- assign __bag = site.data.i18n['no'] -%}
{%- endif -%}
{%- if __bag == nil -%}
  {%- assign __bag = site.data.i18n['en'] -%}
{%- endif -%}
{%- assign __val = nil -%}
{%- if include.ns -%}
  {%- assign __ns = __bag[include.ns] -%}
  {%- if __ns -%}
    {%- assign __val = __ns[include.k] -%}
  {%- endif -%}
  {%- if (__val == nil or __val == '') -%}
    {%- assign __fallback_no = site.data.i18n['no'] -%}
    {%- if __fallback_no and __fallback_no[include.ns] -%}
      {%- assign __val = __fallback_no[include.ns][include.k] -%}
    {%- endif -%}
  {%- endif -%}
  {%- if (__val == nil or __val == '') -%}
    {%- assign __fallback_en = site.data.i18n['en'] -%}
    {%- if __fallback_en and __fallback_en[include.ns] -%}
      {%- assign __val = __fallback_en[include.ns][include.k] -%}
    {%- endif -%}
  {%- endif -%}
{%- else -%}
  {%- assign __val = __bag[include.k] -%}
  {%- if (__val == nil or __val == '') -%}
    {%- assign __val = site.data.i18n['no'][include.k] -%}
  {%- endif -%}
  {%- if (__val == nil or __val == '') -%}
    {%- assign __val = site.data.i18n['en'][include.k] -%}
  {%- endif -%}
{%- endif -%}
{%- if __val and __val != '' -%}
  {{ __val }}
{%- else -%}
  {%- if __lang == 'no' and include.fallback_no -%}
    {{ include.fallback_no }}
  {%- else -%}
    {{ include.fallback | default: include.k }}
  {%- endif -%}
{%- endif -%}
